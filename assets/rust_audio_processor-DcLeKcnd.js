let r,l=null;function b(){return(l===null||l.byteLength===0)&&(l=new Uint8Array(r.memory.buffer)),l}let d=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&d.decode();const D=2146435072;let p=0;function v(e,t){return p+=t,p>=D&&(d=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}},d.decode(),p=t),d.decode(b().subarray(e,e+t))}function g(e,t){return e=e>>>0,v(e,t)}let f=0;const y=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},M=typeof y.encodeInto=="function"?function(e,t){return y.encodeInto(e,t)}:function(e,t){const n=y.encode(e);return t.set(n),{read:e.length,written:n.length}};function E(e,t,n){if(n===void 0){const a=y.encode(e),u=t(a.length,1)>>>0;return b().subarray(u,u+a.length).set(a),f=a.length,u}let o=e.length,s=t(o,1)>>>0;const i=b();let c=0;for(;c<o;c++){const a=e.charCodeAt(c);if(a>127)break;i[s+c]=a}if(c!==o){c!==0&&(e=e.slice(c)),s=n(s,o,o=c+e.length*3,1)>>>0;const a=b().subarray(s+c,s+o),u=M(e,a);c+=u.written,s=n(s,o,c,1)>>>0}return f=c,s}let _=null;function A(){return(_===null||_.buffer.detached===!0||_.buffer.detached===void 0&&_.buffer!==r.memory.buffer)&&(_=new DataView(r.memory.buffer)),_}function I(){r.main()}let w=null;function x(){return(w===null||w.byteLength===0)&&(w=new Float32Array(r.memory.buffer)),w}function m(e,t){const n=t(e.length*4,4)>>>0;return x().set(e,n/4),f=e.length,n}function h(e,t){return e=e>>>0,x().subarray(e/4,e/4+t)}function k(e){let t,n;try{const o=E(e,r.__wbindgen_malloc,r.__wbindgen_realloc),s=f,i=r.greet(o,s);return t=i[0],n=i[1],g(i[0],i[1])}finally{r.__wbindgen_free(t,n,1)}}function P(e,t){const n=m(e,r.__wbindgen_malloc),o=f,s=r.multiply_array(n,o,t);var i=h(s[0],s[1]).slice();return r.__wbindgen_free(s[0],s[1]*4,4),i}const T=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>r.__wbg_wasmspectrogramprocessor_free(e>>>0,1));class j{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,T.unregister(this),t}free(){const t=this.__destroy_into_raw();r.__wbg_wasmspectrogramprocessor_free(t,0)}constructor(t){const n=r.wasmspectrogramprocessor_new(t);return this.__wbg_ptr=n>>>0,T.register(this,this.__wbg_ptr,this),this}process_window(t){const n=m(t,r.__wbindgen_malloc),o=f,s=r.wasmspectrogramprocessor_process_window(this.__wbg_ptr,n,o);var i=h(s[0],s[1]).slice();return r.__wbindgen_free(s[0],s[1]*4,4),i}compute_spectrogram(t,n){const o=m(t,r.__wbindgen_malloc),s=f,i=r.wasmspectrogramprocessor_compute_spectrogram(this.__wbg_ptr,o,s,n);var c=h(i[0],i[1]).slice();return r.__wbindgen_free(i[0],i[1]*4,4),c}}const R=new Set(["basic","cors","default"]);async function F(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(o){if(e.ok&&R.has(e.type)&&e.headers.get("Content-Type")!=="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",o);else throw o}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function S(){const e={};return e.wbg={},e.wbg.__wbg_error_7534b8e9a36f1ab4=function(t,n){let o,s;try{o=t,s=n,console.error(g(t,n))}finally{r.__wbindgen_free(o,s,1)}},e.wbg.__wbg_log_17e39c8298fef94f=function(t,n){console.log(g(t,n))},e.wbg.__wbg_new_8a6f238a6ece86ea=function(){return new Error},e.wbg.__wbg_stack_0ed75d68575b0f3c=function(t,n){const o=n.stack,s=E(o,r.__wbindgen_malloc,r.__wbindgen_realloc),i=f;A().setInt32(t+4*1,i,!0),A().setInt32(t+4*0,s,!0)},e.wbg.__wbg_wbindgenthrow_4c11a24fca429ccf=function(t,n){throw new Error(g(t,n))},e.wbg.__wbindgen_init_externref_table=function(){const t=r.__wbindgen_export_3,n=t.grow(4);t.set(0,void 0),t.set(n+0,void 0),t.set(n+1,null),t.set(n+2,!0),t.set(n+3,!1)},e}function W(e,t){return r=e.exports,O.__wbindgen_wasm_module=t,_=null,w=null,l=null,r.__wbindgen_start(),r}function z(e){if(r!==void 0)return r;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module:e}=e:console.warn("using deprecated parameters for `initSync()`; pass a single object instead"));const t=S();e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e));const n=new WebAssembly.Instance(e,t);return W(n,e)}async function O(e){if(r!==void 0)return r;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof e>"u"&&(e=new URL("/Spektra/assets/rust_audio_processor_bg-DTk9ovzT.wasm",import.meta.url));const t=S();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:o}=await F(await e,t);return W(n,o)}export{j as WasmSpectrogramProcessor,O as default,k as greet,z as initSync,I as main,P as multiply_array};
